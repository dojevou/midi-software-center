# Makefile for Quantum Analyzer

.PHONY: all build release test clean install help

# Default target
all: build

# Build debug version
build:
	@echo "ğŸ”¨ Building debug version..."
	cargo build

# Build optimized release version
release:
	@echo "ğŸš€ Building release version..."
	cargo build --release
	@echo "âœ… Binary: target/release/quantum-analyzer"

# Run tests
test:
	@echo "ğŸ§ª Running tests..."
	cargo test

# Run clippy
clippy:
	@echo "ğŸ“ Running clippy..."
	cargo clippy -- -D warnings

# Format code
fmt:
	@echo "âœ¨ Formatting code..."
	cargo fmt

# Check formatting
fmt-check:
	@echo "ğŸ” Checking formatting..."
	cargo fmt -- --check

# Clean build artifacts
clean:
	@echo "ğŸ§¹ Cleaning..."
	cargo clean

# Install as cargo plugin
install:
	@echo "ğŸ“¦ Installing as cargo plugin..."
	cargo install --path .
	@echo "âœ… Use with: cargo quantum"

# Install to /usr/local/bin
install-system:
	@echo "ğŸ“¦ Installing to /usr/local/bin..."
	cargo build --release
	sudo cp target/release/quantum-analyzer /usr/local/bin/
	@echo "âœ… Installed: /usr/local/bin/quantum-analyzer"

# Run on test project
demo:
	@echo "ğŸ¬ Running demo analysis..."
	cargo run -- --project . --verbose

# Run with autofix
demo-fix:
	@echo "ğŸ”§ Running demo with auto-fix..."
	cargo run -- --project . --autofix --verbose

# Generate docs
docs:
	@echo "ğŸ“š Generating documentation..."
	cargo doc --open

# Check everything
check-all: fmt-check clippy test
	@echo "âœ… All checks passed!"

# Build and run
run:
	cargo run -- $(ARGS)

# Help
help:
	@echo "Quantum Analyzer - Makefile"
	@echo ""
	@echo "Targets:"
	@echo "  make build          - Build debug version"
	@echo "  make release        - Build optimized release"
	@echo "  make test           - Run tests"
	@echo "  make clippy         - Run clippy linter"
	@echo "  make fmt            - Format code"
	@echo "  make fmt-check      - Check code formatting"
	@echo "  make clean          - Remove build artifacts"
	@echo "  make install        - Install as cargo plugin"
	@echo "  make install-system - Install to /usr/local/bin"
	@echo "  make demo           - Run demo analysis"
	@echo "  make demo-fix       - Run demo with auto-fix"
	@echo "  make docs           - Generate documentation"
	@echo "  make check-all      - Run all checks"
	@echo "  make run ARGS='...' - Build and run with args"
	@echo ""
	@echo "Examples:"
	@echo "  make release"
	@echo "  make run ARGS='--project /path/to/project --autofix'"
	@echo "  make install"
