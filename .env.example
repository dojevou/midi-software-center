# .env.example
# Copy this to .env and fill in your values
# Both Pipeline and DAW applications use these settings

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/midi_library

# Connection pool settings
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=30

# ============================================================================
# MEILISEARCH CONFIGURATION (DAW only)
# ============================================================================

MEILISEARCH_URL=http://localhost:7700
MEILISEARCH_API_KEY=your_master_key_here
MEILISEARCH_INDEX_NAME=midi_files

# ============================================================================
# PROCESSING CONFIGURATION (Pipeline only)
# ============================================================================

# Default directories
DEFAULT_SOURCE_DIR=/path/to/midi/archives
DEFAULT_EXTRACT_DIR=/path/to/extracted/midi

# Processing settings
PARALLEL_WORKERS=0  # 0 = auto-detect CPU count
BATCH_SIZE=1000
ENABLE_DEDUPLICATION=true
ENABLE_SPLITTING=true
ENABLE_RENAMING=true

# Archive extraction
MAX_ARCHIVE_DEPTH=10
TEMP_EXTRACT_DIR=/tmp/midi-pipeline

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: trace, debug, info, warn, error
RUST_LOG=info,midi_pipeline=debug,midi_daw=debug

# Log output directory
LOG_DIR=./logs

# Log rotation
LOG_MAX_SIZE_MB=100
LOG_MAX_AGE_DAYS=30

# ============================================================================
# MIDI HARDWARE CONFIGURATION (DAW only)
# ============================================================================

# Default MIDI device name (partial match)
DEFAULT_MIDI_DEVICE=UR22

# MIDI timing precision (microseconds)
MIDI_TIMING_PRECISION=1000

# MIDI latency compensation (milliseconds)
MIDI_LATENCY_MS=5

# ============================================================================
# SEARCH CONFIGURATION (DAW only)
# ============================================================================

# Search result limits
SEARCH_DEFAULT_LIMIT=50
SEARCH_MAX_LIMIT=500

# Compatibility matching
COMPATIBILITY_BPM_TOLERANCE=5
COMPATIBILITY_KEY_MAX_DISTANCE=2

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Memory limits
MAX_MEMORY_MB=4096

# File processing
MAX_FILE_SIZE_MB=100
SKIP_LARGE_FILES=false

# Cache settings
CACHE_ENABLED=true
CACHE_SIZE_MB=256
CACHE_TTL_SECONDS=3600

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================

# Enable development features
DEV_MODE=false

# Enable performance profiling
ENABLE_PROFILING=false

# Mock MIDI hardware (for testing without physical device)
MOCK_MIDI_HARDWARE=false
